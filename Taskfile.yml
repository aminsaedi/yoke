# Ironically the task runner is itself a dev dependency of the project.
# To install it run the following command:
#
# go install github.com/go-task/task/v3/cmd/task@latest

version: '3'

tasks:
  fmt:
    cmds:
      - goimports -local github.com/davidmdm,github.com/davidmdm/yoke -w .
      - gofumpt -w .

  test:
    cmds:
      - go test -cover -p 1 -v ./...

  kube:
    cmds:
      - GOOS=wasip1 GOARCH=wasm go build -o kube.wasm ./cmd/examples/kube

  pg:
    cmds:
      - GOOS=wasip1 GOARCH=wasm go build -o pg.wasm ./cmd/examples/pg

  redis:
    cmds:
      - GOOS=wasip1 GOARCH=wasm go build -o redis.wasm ./cmd/examples/redis
